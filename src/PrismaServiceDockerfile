FROM node:10

WORKDIR /usr/src

COPY package.json .
COPY yarn.lock .
COPY database/prisma.yml .
COPY database/seed.graphql .
COPY database/datamodel.graphql .
COPY .env .
COPY wait-for-it.sh .

RUN yarn global add concurrently
RUN yarn global add prisma
RUN chmod +x ./wait-for-it.sh
RUN yarn install

COPY service/ ./service/

EXPOSE 4000
